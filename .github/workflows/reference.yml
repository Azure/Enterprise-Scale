name: Reference

on:
  workflow_dispatch:
    inputs:
      logLevel:
        description: "Log level"
        required: true
        default: "warning"

jobs:
  reference:
    name: Reference
    runs-on: ubuntu-latest
    steps:
      - name: Actions checkout
        uses: actions/checkout@v2
      - name: Run script
        shell: pwsh
        run: |
          Remove-Item -Path ".\azopsreference\3fc1081d-6105-4e19-b60c-1ec1252cf560" -Recurse -Force -Verbose
      - name: Actions azops
        uses: Azure/AzOps@main
        with:
          mode: pull
        env:
          AZOPS_STATE: '.\AzOpsReference'
          AZOPS_GENERALIZE_TEMPLATES: "1"
          AZURE_CREDENTIALS: ${{ secrets.AZURE_CREDENTIALS }}
